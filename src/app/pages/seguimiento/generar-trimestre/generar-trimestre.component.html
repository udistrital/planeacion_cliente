<mat-card class="card-oas">
    <mat-card-header>
        <div style="text-align:center;">
            <mat-card-title>SEGUIMIENTO PLANES DE ACCIÓN</mat-card-title>
            <mat-card-subtitle>Unidad Académico y/o administrativa {{unidad}}</mat-card-subtitle>
            <br>
            <u class="textGuide">
                A continuación encontrará un listado de las actividades asociadas al Plan de Acción, a las cuales podrá
                realizar la revisión para el periodo respectivo.
            </u>
        </div>
    </mat-card-header>
    <mat-card-content>
        <br>
        <form [formGroup]="formGenerarTrimestre">
            <div class="container-border">
                <h1 class="head-border">INFORMACIÓN DEL PLAN</h1>
                <mat-grid-list cols="6" rowHeight="35px" gutterSize="5px">
                    <mat-grid-tile class="titulo">Actividad general</mat-grid-tile>
                    <mat-grid-tile>
                        <textarea class="width-text-trimestre" [readonly]="true"
                            placeholder="Actividad">{{seguimiento.informacion.index}}</textarea>
                    </mat-grid-tile>
                    <mat-grid-tile class="titulo" colspan="4">Descripción de la actividad</mat-grid-tile>
                    <mat-grid-tile class="titulo">Ponderación</mat-grid-tile>
                    <mat-grid-tile>
                        <textarea class="width-text-trimestre" [readonly]="true"
                            placeholder="%">{{seguimiento.informacion.ponderacion}}</textarea>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="4" rowspan="2">
                        <textarea class="width-text-trimestre" [readonly]="true"
                            placeholder="Descripción de la actividad general seleccionada">{{seguimiento.informacion.descripcion}}</textarea>
                    </mat-grid-tile>
                    <mat-grid-tile class="titulo">Periodo de ejecución</mat-grid-tile>
                    <mat-grid-tile>
                        <textarea class="width-text-trimestre" [readonly]="true"
                            placeholder="Periodo">{{seguimiento.informacion.periodo}}</textarea>
                    </mat-grid-tile>
                </mat-grid-list>

                <mat-grid-list cols="6" rowHeight="35px" gutterSize="5px">
                    <mat-grid-tile colspan="2" class="titulo">Productos asociados</mat-grid-tile>
                    <mat-grid-tile class="titulo" colspan="4">Tareas asociadas</mat-grid-tile>
                    <mat-grid-tile colspan="2" rowspan="2">
                        <textarea class="width-text-trimestre"
                            [readonly]="true">{{seguimiento.informacion.producto}}</textarea>
                    </mat-grid-tile>
                    <mat-grid-tile colspan="4" rowspan="2">
                        <textarea class="width-text-trimestre" [readonly]="true"
                            placeholder="Tareas asociadas a la actividad general">{{seguimiento.informacion.tarea}}</textarea>
                    </mat-grid-tile>
                </mat-grid-list>
                <div class="container-border">
                    <h1>COMPONENTE CUALITATIVO</h1>
                    <br>
                    <mat-card class="desc-input-label">
                        <mat-card-header>Reporte de avance del trimestre</mat-card-header>
                        <mat-card-content>
                            <textarea class="width-text-trimestre" id="reporte" placeholder="Reporte" required
                                [readonly]="!indicadorSelected || readonlyFormulario"></textarea>
                        </mat-card-content>
                    </mat-card>
                    <mat-card class="desc-input-label">
                        <mat-card-header>Productos intermedios</mat-card-header>
                        <mat-card-content>
                            <textarea class="width-text-trimestre" id="Producto" placeholder="Producto"
                                formControlName="producto" required
                                [readonly]="!indicadorSelected || readonlyFormulario"></textarea>
                        </mat-card-content>
                    </mat-card>
                    <mat-card class="desc-input-label">
                        <mat-card-header>Evidencias</mat-card-header>
                        <mat-card-content *ngIf="rol=='JEFE_DEPENDENCIA'">
                            <div class="width-text-trimestre"
                                style="background-color: white; height: 60px; text-align: unset;">
                                <button class="background-button align-button1" mat-raised-button color="primary"
                                    (click)="onSeeDocumentos()" style="margin: 10px 2% 2% 19%;">Visualizar</button>
                                <label mat-raised-button class="width-label-upload align-button2"
                                    style="margin: 10px 0% 2% 52%;">
                                    <input type="file" (change)="onChangeDocumento($event.target)">
                                    Adjuntar Documento
                                </label>
                            </div>
                        </mat-card-content>

                        <mat-card-content *ngIf="rol=='PLANEACION'">
                            <div class="width-text-trimestre container-button3"
                                style="background-color: white; height: 60px; text-align: unset;">
                                <button class="background-button" mat-raised-button color="primary"
                                    (click)="onSeeDocumentos()">Visualizar</button>
                            </div>
                        </mat-card-content>
                    </mat-card>
                    <mat-card class="desc-input-label">
                        <mat-card-header>Dificultades</mat-card-header>
                        <mat-card-content>
                            <textarea class="width-text-trimestre" id="Dificultades" placeholder="Dificultades"
                                formControlName="dificultades" required
                                [readonly]="!indicadorSelected || readonlyFormulario"></textarea>
                        </mat-card-content>
                    </mat-card>
                    <mat-card class="desc-input-label">
                        <mat-card-header>Observaciones</mat-card-header>
                        <mat-card-content>
                            <textarea class="width-text-trimestre" id="Observaciones" placeholder="Observaciones"
                                formControlName="observaciones" required
                                [readonly]="!indicadorSelected || readonlyFormulario"></textarea>
                        </mat-card-content>
                    </mat-card>

                    <div class="container-button3">

                        <button class="background-button" mat-raised-button color="primary"
                            (click)="guardarSeguimiento()">Guardar</button>
                    </div>
                </div>
                <br>
                <div class="container-border">
                    <h1>COMPONENTE CUANTITATIVO</h1>
                    <div class="tabla-indicadores mat-elevation-z8">
                        <div>
                            <table mat-table [dataSource]="datosIndicadores">

                                <ng-container matColumnDef="nombre">
                                    <th mat-header-cell *matHeaderCellDef> Nombre </th>
                                    <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                                </ng-container>

                                <ng-container matColumnDef="formula">
                                    <th mat-header-cell *matHeaderCellDef> Formula </th>
                                    <td mat-cell *matCellDef="let element"> {{element.formula}} </td>
                                </ng-container>

                                <ng-container matColumnDef="meta">
                                    <th mat-header-cell *matHeaderCellDef> Meta </th>
                                    <td mat-cell *matCellDef="let element"> {{element.meta}} </td>
                                </ng-container>

                                <ng-container matColumnDef="header-row-general">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        [attr.colspan]="3">
                                        Indicadores asociados a la actividad general
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-nombre">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Nombre
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-formula">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Formula
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-meta">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Meta
                                    </th>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="['header-row-general']"></tr>
                                <tr mat-header-row
                                    *matHeaderRowDef="['header-row-nombre', 'header-row-formula','header-row-meta']">
                                </tr>
                                <tr mat-row *matRowDef="let row; columns: ['nombre','formula','meta'];"></tr>

                            </table>
                        </div>
                        <div>
                            <table mat-table [dataSource]="datosIndicadores">

                                <ng-container matColumnDef="reporteNumerador">
                                    <th mat-header-cell *matHeaderCellDef> Reporte numerador </th>
                                    <td class="rowText" mat-cell *matCellDef="let element">
                                        <textarea class="form-control" matInput placeholder="Numerador"
                                            [readonly]="readonlyFormulario" [value]="element.reporteNumerador"
                                            [(ngModel)]="element.reporteNumerador" [ngModelOptions]="{standalone: true}"
                                            required></textarea>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="reporteDenominador">
                                    <th mat-header-cell *matHeaderCellDef> Reporte denominador </th>
                                    <td class="rowText" mat-cell *matCellDef="let element">
                                        <textarea class="form-control" matInput placeholder="Denominador"
                                            [readonly]="readonlyFormulario || denominadorFijo"
                                            [value]="element.reporteDenominador"
                                            [(ngModel)]="element.reporteDenominador"
                                            [ngModelOptions]="{standalone: true}" required></textarea>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="detalleReporte">
                                    <th mat-header-cell *matHeaderCellDef> Detalle del reporte </th>
                                    <td class="rowText" mat-cell *matCellDef="let element">
                                        <textarea class="form-control" matInput placeholder="Detalle"
                                            [readonly]="readonlyFormulario" [value]="element.detalleReporte"
                                            [(ngModel)]="element.detalleReporte" [ngModelOptions]="{standalone: true}"
                                            required></textarea>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="header-row-general">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        [attr.colspan]="3">
                                        Indicadores asociados a la actividad general
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-numerador">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Numerador
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-denominador">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Denominador
                                    </th>
                                </ng-container>

                                <ng-container matColumnDef="header-row-detalle">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center"
                                        class="secundaria">
                                        Detalle del reporte
                                    </th>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="['header-row-general']"></tr>
                                <tr mat-header-row
                                    *matHeaderRowDef="['header-row-numerador', 'header-row-denominador','header-row-detalle']">
                                </tr>
                                <tr mat-row
                                    *matRowDef="let row; columns: ['reporteNumerador','reporteDenominador','detalleReporte'];">
                                </tr>

                            </table>
                        </div>
                        <div>
                            <button class="background-button"
                                style="width: auto; display:block; margin-left: auto; margin-right: auto;"
                                mat-raised-button color="primary" (click)="calcularResultado()">Calcular/Ver
                                resultados</button>
                            <table mat-table [dataSource]="datosIndicadores">

                                <ng-container matColumnDef="observaciones">
                                    <th mat-header-cell *matHeaderCellDef> Observaciones Oficina Asesora de Planeación y
                                        Control </th>
                                    <td class="rowText" mat-cell *matCellDef="let element">
                                        <textarea class="form-control" matInput placeholder="Observaciones"
                                            [readonly]="readonlyFormulario" [value]="element.observaciones"
                                            [(ngModel)]="element.observaciones" [ngModelOptions]="{standalone: true}"
                                            required></textarea>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="header-row-general">
                                    <th mat-header-cell *matHeaderCellDef [style.text-align]="center">
                                        Observaciones Oficina Asesora de Planeación y Control
                                    </th>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="['header-row-general']"></tr>
                                <tr mat-row *matRowDef="let row; columns: ['observaciones'];"></tr>

                            </table>
                        </div>
                    </div>
                    <br>

                    <hr>

                    <br>
                    <div class="mat-elevation-z8">
                        <table mat-table [dataSource]="datosResultados">

                            <ng-container matColumnDef="indicador">
                                <th mat-header-cell *matHeaderCellDef class="secundaria"> Indicador del periodo </th>
                                <th mat-header-cell *matHeaderCellDef class="descripcion"> A partir del reporte de las
                                    variables para el periodo se calcula el reporte del trimestre </th>
                                <td mat-cell *matCellDef="let element"> {{element.indicador}} </td>
                            </ng-container>

                            <ng-container matColumnDef="indicadorAcumulado">
                                <th mat-header-cell *matHeaderCellDef class="secundaria"> Indicador acumulado </th>
                                <th mat-header-cell *matHeaderCellDef class="descripcion"> Consolida el valor del
                                    indicador hasta el ultimo periodo reportado </th>
                                <td mat-cell *matCellDef="let element"> {{element.indicadorAcumulado}} </td>
                            </ng-container>

                            <ng-container matColumnDef="avanceAcumulado">
                                <th mat-header-cell *matHeaderCellDef class="secundaria"> Avance acumulado </th>
                                <th mat-header-cell *matHeaderCellDef class="descripcion"> Contrasta el reporte el
                                    indicador acumulado con la meta de la vigencia </th>
                                <td mat-cell *matCellDef="let element"> {{element.avanceAcumulado}} %</td>
                            </ng-container>

                            <ng-container matColumnDef="brechaExistente" class="secundaria">
                                <th mat-header-cell *matHeaderCellDef class="secundaria"> Brecha existente </th>
                                <th mat-header-cell *matHeaderCellDef class="descripcion"> A partir de la meta
                                    establecida y el cálculo del indicador acumulado establece la brecha existente o el
                                    faltante por cubrir </th>
                                <td mat-cell *matCellDef="let element"> {{element.brechaExistente}} </td>
                            </ng-container>

                            <ng-container matColumnDef="header-row-general">
                                <th mat-header-cell *matHeaderCellDef [style.text-align]="center" [attr.colspan]="4">
                                    Resultados asociados al reporte del indicador
                                </th>
                            </ng-container>

                            <ng-container matColumnDef="header-row-ind">
                                <th mat-header-cell *matHeaderCellDef [style.text-align]="center" class="descripcion">
                                    A partir del reporte de las variables para el periodo se calcula el reporte del
                                    trimestre
                                </th>
                            </ng-container>

                            <ng-container matColumnDef="header-row-acumulado">
                                <th mat-header-cell *matHeaderCellDef [style.text-align]="center" class="descripcion">
                                    Consolida el valor del indicador hasta el ultimo periodo reportado
                                </th>
                            </ng-container>

                            <ng-container matColumnDef="header-row-avanceAcumulado">
                                <th mat-header-cell *matHeaderCellDef [style.text-align]="center" class="descripcion">
                                    Contrasta el reporte el indicador acumulado con la meta de la vigencia
                                </th>
                            </ng-container>

                            <ng-container matColumnDef="header-row-brecha">
                                <th mat-header-cell *matHeaderCellDef [style.text-align]="center" class="descripcion">
                                    A partir de la meta establecida y el cálculo del indicador acumulado establece la
                                    brecha existente o el faltante por cubrir
                                </th>
                            </ng-container>



                            <tr mat-header-row *matHeaderRowDef="['header-row-general']"></tr>
                            <tr mat-header-row
                                *matHeaderRowDef="['indicador','indicadorAcumulado', 'avanceAcumulado', 'brechaExistente']">
                            </tr>
                            <tr mat-header-row
                                *matHeaderRowDef="['header-row-ind','header-row-acumulado', 'header-row-avanceAcumulado','header-row-brecha']">
                            </tr>
                            <tr mat-row
                                *matRowDef="let row; columns: ['indicador','indicadorAcumulado', 'avanceAcumulado', 'brechaExistente'];">
                            </tr>
                        </table>
                    </div>

                    <br>

                    <mat-card *ngIf="rol=='PLANEACION'">
                        <mat-card-header>Estado de la actividad</mat-card-header>
                        <mat-card-content>
                            <textarea class="width-text-trimestre" id="Estado" placeholder="Estado"
                                formControlName="estadoActividad" required
                                [readonly]="!indicadorSelected || readonlyFormulario">{{seguimiento.estado.nombre}}</textarea>
                        </mat-card-content>
                    </mat-card>
                </div>

            </div>
            <br>
            <div class="container-button">
                <button class="background-button align-button1" mat-raised-button color="primary"
                    (click)="guardarSeguimiento()">Guardar</button>
                <button class="background-button align-button2" mat-raised-button color="primary"
                    (click)="backClicked()">Regresar</button>
            </div>
            <div class="align-button-enviar" *ngIf="rol=='JEFE_DEPENDENCIA' && estadoSeguimiento==='En Reporte'">
                <button class="background-button" mat-raised-button color="primary" (click)="generarReporte()">Generar
                    Reporte</button>
            </div>
            <div class="align-button-enviar"
                *ngIf="rol=='PLANEACION' && (estadoSeguimiento==='Generado' || estadoSeguimiento==='Ajustado')">
                <button class="background-button" mat-raised-button color="primary" (click)="enviarObservacion()">Enviar
                    Observación</button>
            </div>
            <div class="align-button-enviar"
                *ngIf="rol=='PLANEACION' && (estadoSeguimiento==='Generado' ||estadoSeguimiento==='Ajustado')">
                <button class="background-button" mat-raised-button color="primary" (click)="aprobarReporte()">Aprobar
                    Reporte</button>
            </div>
            <div class="align-button-enviar" *ngIf="rol=='JEFE_DEPENDENCIA' && estadoSeguimiento==='Observación'">
                <button class="background-button" mat-raised-button color="primary" (click)="ajustarReporte()">Reenviar
                    Reporte</button>
            </div>
        </form>
    </mat-card-content>
</mat-card>