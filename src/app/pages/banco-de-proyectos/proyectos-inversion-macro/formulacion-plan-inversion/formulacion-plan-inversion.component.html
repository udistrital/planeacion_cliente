<!-- SELECCIÓN MENÚ PRINCIPAL -->
<mat-card class="card-oas">
    <mat-card-header>
        <mat-card-title>Formulación</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <u class="textGuide">
            A continuación usted deberá diligenciar la información necesaria para realizar una completa formulación de su PLAN DE ACCIÓN DE INVERSIÓN.
        </u>
    </mat-card-content>
    <ng-container>
        <div class="container">
          <div class="flex">
            <div class="sameRow" style="vertical-align: middle;" [style.width.%]="60">Estado del plan: {{"assignment_turned_in"}}
              <br>
              <mat-icon class="icon-estado">{{"assignment_turned_in"}}</mat-icon>
            </div>
            <div class="sameRow" [style.width.%]="80">
              <mat-form-field appearance="fill" [style.width.%]="80">
                <mat-label id="tipo-input-label">Versiones</mat-label>
                <mat-select (selectionChange)="onChange($event.value)" [formControl]="">
                  <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                    Versión {{version.numero}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </ng-container>
    <mat-card-content>
        <form [formGroup]="">
            <div class="container-border">
                <h2 class="titulo">Armonización general del Plan de Acción</h2>
                <div class="container-border">
                    <mat-card-content>
                        <u class="textGuide">
                            Armonización Proyectos de Inversión
                        </u>
                    </mat-card-content>
                    <mat-form-field appearance="fill" [style.width.%]="100">
                        <mat-label id="tipo-input-label">Seleccione el Proyecto de Inversión asociado</mat-label>
                        <mat-select (selectionChange)="onChange($event.value)">
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                                {{vigencia.Nombre}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <table mat-table [dataSource]="dataProyects" class="mat-elevation-z8">

                      <!-- index -->
                      <ng-container matColumnDef="codigo" class="num">
                          <th mat-header-cell *matHeaderCellDef>Código</th>
                          <td mat-cell *matCellDef="let element" class="num">{{element.codigo}}
                              <!-- <p *ngIf="element.index!=undefined">
                                  {{element.index}}
                              </p>
                              <p *ngIf="element.index==undefined">
                                  {{rowIndex+1}}
                              </p> -->
                          </td>
                          <td mat-footer-cell *matFooterCellDef class="footer">
                              {{step.footer}}
                          </td>
                      </ng-container>
                      <!-- Unidad Column -->
                      <ng-container matColumnDef="nombre" class="nombre-unidad">
                          <th mat-header-cell *matHeaderCellDef> Nombre del Proyecto </th>
                          <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                      </ng-container>
      
                      <!-- Seleccionar -->
                      <ng-container matColumnDef="actions" class="col-seleccion">
                          <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
                          <td mat-cell *matCellDef="let row" class="mat-column-actions">
                              <button mat-icon-button (click)="changeIcon(row)">
                                  <mat-icon>{{row.iconSelected}}</mat-icon>
                              </button>
                          </td>
                      </ng-container>
      
                      <tr mat-header-row *matHeaderRowDef="displayedProyects"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedProyects;"></tr>
                    </table>
                </div> 
                <div class="container-border">
                    <mat-card-content>
                        <u class="textGuide">
                            Armonización Plan de Desarrollo Distrital
                        </u>
                    </mat-card-content>
                    <mat-form-field appearance="fill" [style.width.%]="100">
                        <mat-label id="tipo-input-label">Seleccione el Plan de Desarrollo Distrital</mat-label>
                        <mat-select (selectionChange)="onChange($event.value)">
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                                {{vigencia.Nombre}}
                            </mat-option>
                        </mat-select>                        
                    </mat-form-field>
                    <table mat-table [dataSource]="dataPDD" class="mat-elevation-z8">
                      <!-- Unidad Column -->
                      <ng-container matColumnDef="niveles" class="nombre-unidad">
                          <th mat-header-cell *matHeaderCellDef> Niveles </th>
                          <td mat-cell *matCellDef="let element"> {{element.niveles}} </td>
                      </ng-container>
      
                      <!-- Seleccionar -->
                      <ng-container matColumnDef="actions" class="col-seleccion">
                          <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
                          <td mat-cell *matCellDef="let row" class="mat-column-actions">
                              <button mat-icon-button (click)="changeIcon(row)">
                                  <mat-icon>{{row.iconSelected}}</mat-icon>
                              </button>
                          </td>
                      </ng-container>
      
                      <tr mat-header-row *matHeaderRowDef="displayedPDD"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedPDD;"></tr>
                    </table>
                </div> 
                <div class="container-border">
                    <mat-card-content>
                        <u class="textGuide">
                            Armonización Plan Estrategico de Desarrollo
                        </u>
                    </mat-card-content>
                    <mat-form-field appearance="fill" [style.width.%]="100">
                        <mat-label id="tipo-input-label">Seleccione el Plan Estrategico de Desarrollo</mat-label>
                        <mat-select (selectionChange)="onChange($event.value)">
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                                {{vigencia.Nombre}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <table mat-table [dataSource]="dataPED" class="mat-elevation-z8">

                      <!-- index -->
                      <ng-container matColumnDef="index" class="num">
                          <th mat-header-cell *matHeaderCellDef>Código</th>
                          <td mat-cell *matCellDef="let element" class="num">{{element.index}}
                              <!-- <p *ngIf="element.index!=undefined">
                                  {{element.index}}
                              </p>
                              <p *ngIf="element.index==undefined">
                                  {{rowIndex+1}}
                              </p> -->
                          </td>
                          <td mat-footer-cell *matFooterCellDef class="footer">
                              {{step.footer}}
                          </td>
                      </ng-container>
                      <!-- Unidad Column -->
                      <ng-container matColumnDef="nombre" class="nombre-unidad">
                          <th mat-header-cell *matHeaderCellDef> Nombre del Proyecto </th>
                          <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                      </ng-container>
      
                      <!-- Seleccionar -->
                      <ng-container matColumnDef="actions" class="col-seleccion">
                          <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
                          <td mat-cell *matCellDef="let row" class="mat-column-actions">
                              <button mat-icon-button (click)="changeIcon(row)">
                                  <mat-icon>{{row.iconSelected}}</mat-icon>
                              </button>
                          </td>
                      </ng-container>
      
                      <tr mat-header-row *matHeaderRowDef="displayedPED"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedPED;"></tr>
                    </table>
                </div>  
                <div class="container-border">
                    <mat-card-content>
                        <u class="textGuide">
                            Armonización Plan Indicativo
                        </u>
                    </mat-card-content>
                    <mat-form-field appearance="fill" [style.width.%]="100">
                        <mat-label id="tipo-input-label">Seleccione el Plan Indicativo</mat-label>
                        <mat-select (selectionChange)="onChange($event.value)">
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                                {{vigencia.Nombre}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <table mat-table [dataSource]="dataPI" class="mat-elevation-z8">

                      <!-- index -->
                      <ng-container matColumnDef="index" class="num">
                          <th mat-header-cell *matHeaderCellDef>Código</th>
                          <td mat-cell *matCellDef="let element" class="num">{{element.index}}
                              <!-- <p *ngIf="element.index!=undefined">
                                  {{element.index}}
                              </p>
                              <p *ngIf="element.index==undefined">
                                  {{rowIndex+1}}
                              </p> -->
                          </td>
                          <td mat-footer-cell *matFooterCellDef class="footer">
                              {{step.footer}}
                          </td>
                      </ng-container>
                      <!-- Unidad Column -->
                      <ng-container matColumnDef="nombre" class="nombre-unidad">
                          <th mat-header-cell *matHeaderCellDef> Nombre del Proyecto </th>
                          <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                      </ng-container>
      
                      <!-- Seleccionar -->
                      <ng-container matColumnDef="actions" class="col-seleccion">
                          <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
                          <td mat-cell *matCellDef="let row" class="mat-column-actions">
                              <button mat-icon-button (click)="changeIcon(row)">
                                  <mat-icon>{{row.iconSelected}}</mat-icon>
                              </button>
                          </td>
                      </ng-container>
      
                      <tr mat-header-row *matHeaderRowDef="displayedPI"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedPI;"></tr>
                    </table>
                </div> 
                <div style="margin: 1rem; text-align: center;">
                  <button  class="footbtn" mat-raised-button color="primary" (click)="guardar()">Confirmar</button>
                </div>  
                            
            </div>          
            
        </form>
    </mat-card-content>    
</mat-card>
<br><br>

<mat-card class="container-border">
  <mat-card-header>
    <h2 class="titulo">Metas Relacionadas al Plan de Acción de Inversión</h2>
  </mat-card-header>
  <table mat-table [dataSource]="dataMetas" matSort>
    <ng-container matColumnDef="Index">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> N° </th>     
      <td  mat-cell *matCellDef="let row">{{row.Index}}</td>      
    </ng-container>
    <ng-container matColumnDef="Meta">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Meta </th>      
      <td  mat-cell *matCellDef="let row"> {{row.Meta}} </td>
      
    </ng-container>
    <ng-container matColumnDef="TipodeMeta">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo de Meta </th>      
      <td mat-cell *matCellDef="let row"> {{row.TipodeMeta}} </td>      
    </ng-container>
    <ng-container matColumnDef="Presupuesto">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Presupuesto Programado </th>      
      <td  mat-cell *matCellDef="let row"> {{row.Presupuesto}} </td>      
    </ng-container>
    <ng-container matColumnDef="ProgPresupuestal">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Prog. Presupupuestal </th>      
      <td mat-cell *matCellDef="let row; let rowIndex = index;"> 
        <button mat-raised-button color="primary" (click)="programarMagnitudes()">
          <mat-icon>add_box</mat-icon>
        </button> 
        <button mat-raised-button color="primary" (click)="guardar()">
          <mat-icon>search</mat-icon>
        </button>  
      </td>     
    </ng-container>
    <ng-container matColumnDef="ProgActividades">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Prog. Actividades </th>
      <td mat-cell *matCellDef="let row; let rowIndex = index">
        <button mat-raised-button color="primary" (click)="programarIdentificacion()">
          <mat-icon>add_box</mat-icon>
        </button> 
        <button mat-raised-button color="primary" (click)="guardar()">
          <mat-icon>search</mat-icon>
        </button>        
      </td>
    </ng-container>    
    <div>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </div>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4"></td>
    </tr>
  </table>
  <div style="margin: 1rem; text-align: center;">
    <button mat-raised-button color="primary" (click)="guardar()">Culminar</button>
    <button mat-raised-button color="primary" (click)="guardar()">Enviar</button>
  </div>
</mat-card>
<br>
<div style="margin: 1rem; text-align: center;" class="container-border">
  <button mat-raised-button color="primary" (click)="programarMetas()">Programar Metas</button>  
</div>
