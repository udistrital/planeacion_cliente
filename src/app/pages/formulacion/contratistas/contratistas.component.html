<ng-container>
    <table mat-table class="noselect" [dataSource]="dataSource"  class="mat-elevation-z8" matSort>


        
       <!-- Descripción de Necesidad -->
        <ng-container matColumnDef="descripcionNecesidad">
            <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'display': 'none'}">Descripción de Necesidad</th>
            <td mat-cell *matCellDef="let element">
              <mat-form-field floatLabel="never">
                <input matInput type="text" class="cell" [value]="element.descripcion" [(ngModel)]="element.descripcion">
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>


        <!-- Perfil -->
       <ng-container matColumnDef="perfil">
          <th  mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Perfil</th>
          <td mat-cell *matCellDef="let element; let rowIndex = index">
            <mat-form-field floatLabel="never">
              <mat-select [(ngModel)]="element.perfil" (selectionChange)="onSelected($event, rowIndex)" placeholder="Perfil del contratista" required>
                <mat-option>--</mat-option>
                <mat-option *ngFor="let perfil of perfiles" [value]="perfil">
                  {{perfil.Nombre}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>


      <!-- Cantidad -->
      <ng-container matColumnDef="cantidad">
          <th  mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Cantidad</th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field floatLabel="never">
              <input min="0" type="number" matInput placeholder="Cantidad" [value]="element.cantidad" [(ngModel)]="element.cantidad" required>
            </mat-form-field>
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>


    <!-- Meses -->
    <ng-container matColumnDef="meses">
        <th  mat-header-cell *matHeaderCellDef >Meses</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field floatLabel="never">
            <input  min="1" max="12"  matInput  type="number" [value]="element.meses" [(ngModel)]="element.meses">
          </mat-form-field>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>


  <!-- Dias -->
  <ng-container matColumnDef="dias">
      <th  mat-header-cell *matHeaderCellDef>Dias</th>
      <td mat-cell *matCellDef="let element">
        <mat-form-field floatLabel="never">
          <input  min="1" max="29"  matInput  type="number" [value]="element.dias" [(ngModel)]="element.dias">
        </mat-form-field>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>


    <!-- Valor Unitario -->
    <ng-container matColumnDef="valorUnitario">
      <th   mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Valor Unitario</th>
      <td mat-cell *matCellDef="let element">
        <mat-form-field floatLabel="never">
          <input  min="0"  matInput  type="number" [value]="element.valorUnitario" [(ngModel)]="element.valorUnitario">
        </mat-form-field>
      <td mat-footer-cell *matFooterCellDef class="footer">
        Total
      </td>
  </ng-container>


    <!-- Valor Total -->
   <ng-container matColumnDef="valorTotal">
      <th  mat-header-cell *matHeaderCellDef  [ngStyle]="{'display': 'none'}">Valor Total</th>
      <td mat-cell *matCellDef="let element">
        <mat-form-field floatLabel="never">
          <label>{{element.valorUnitario * element.cantidad | currency}}</label>
          <input  min="0"  matInput  type="number" [value]="getTotal(element)" [(ngModel)]="element.valorUnitario * element.cantidad">
        </mat-form-field>
      </td>
      <td mat-footer-cell *matFooterCellDef class="footer">
        <p>{{getValorTotal() | currency}}</p>
      </td>
  </ng-container>
      

   <!-- Actividades -->
  <ng-container matColumnDef="actividades">
      <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'display': 'none'}">Actividades</th>
      <td mat-cell *matCellDef="let element">
        <mat-form-field floatLabel="never">
          <mat-select placeholder="Actividades" (selectionChange)="onChange($event.value)" required multiple>
            <mat-option>--</mat-option>
            <mat-option *ngFor="let actividad of actividades" [value]="actividad.index">
              {{actividad.index + " - " + actividad.Meta}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>


     <!-- Acciones -->
  <ng-container matColumnDef="acciones">
    <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'display': 'none'}">
      <button class="material-icons" matTooltip="Agregar elemento" matTooltipPosition="right" mat-icon-button (click)="addContratista()"><mat-icon>add_box</mat-icon></button>
    </th>
    <td mat-cell *matCellDef="let element; let rowIndex = index">
        <button class="material-icons-delete" matTooltip="Eliminar elemento" matTooltipPosition="right" mat-icon-button (click)="deleteContratista(rowIndex)"><mat-icon>delete_outline</mat-icon></button>
    </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
      
      
      
      <!-- Headers-->
      <ng-container matColumnDef="TiempoContrato">
          <th id="col-combinado"  mat-header-cell *matHeaderCellDef [style.text-align]="center" [attr.colspan]="2">Tiempo de Contrato</th>
      </ng-container>
    
      <ng-container matColumnDef="DescripcionNecesidadP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Descripcion de Necesidad</th>
      </ng-container>
    
      <ng-container matColumnDef="PerfilP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Perfil</th>
      </ng-container>
    
      <ng-container matColumnDef="CantidadP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Cantidad</th>
      </ng-container>
    
      <ng-container matColumnDef="ValorUnitarioP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Valor Unitario</th>
      </ng-container>
    
      <ng-container matColumnDef="ValorTotalP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Valor Total</th>
      </ng-container>
    
      <ng-container matColumnDef="ActividadesP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Actividades</th>
      </ng-container>
      
      <ng-container matColumnDef="AccionesP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">
          <button class="material-icons" matTooltip="Agregar elemento" matTooltipPosition="right" mat-icon-button (click)="addContratista()"><mat-icon>add_box</mat-icon></button>
        </th>
      </ng-container>
    

      <tr mat-header-row *matHeaderRowDef="['DescripcionNecesidadP','PerfilP','CantidadP','TiempoContrato','ValorUnitarioP','ValorTotalP','ActividadesP','AccionesP']"
      class="example-second-header-row">
      </tr>
      <tr mat-header-row *matHeaderRowDef="displayedColumns" ></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>

        
    </table>
    <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" aria-label="Select page of users"></mat-paginator>

</ng-container>