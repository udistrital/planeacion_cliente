<!-- SELECCIÓN MENÚ PRINCIPAL -->
<mat-card class="card-oas">
    <mat-card-header>
        <mat-card-title>Definición de fechas para los procesos de formulación y seguimiento</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <form [formGroup]="formFechas">
            <div class="container-border">
                <h2 class="titulo">Planes de Acción de Funcionamiento</h2>
                <mat-form-field appearance="fill" [style.width.%]="100">
                    <mat-label id="tipo-input-label">Seleccione la Vigencia</mat-label>
                    <mat-select (selectionChange)="onChangeV($event.value)">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                            {{vigencia.Nombre}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="fill" [style.width.%]="100">
                    <mat-label id="tipo-input-label">Formulación / Seguimiento</mat-label>
                    <mat-select (selectionChange)="onChange($event.value)">
                        <mat-option value="formulacion">Formulación</mat-option>
                        <mat-option value="seguimiento">Seguimiento</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>            
            <ng-container *ngIf="tipo=='seguimiento' && vigenciaSelected">
                <div class="container-border">
                    <h4>Período 1</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="fecha1">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker2" formControlName="fecha2">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 2</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker3" formControlName="fecha3">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                        <mat-datepicker #picker3></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker4" formControlName="fecha4">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                        <mat-datepicker #picker4></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 3</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker5" formControlName="fecha5">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                        <mat-datepicker #picker5></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker6" formControlName="fecha6">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker6"></mat-datepicker-toggle>
                        <mat-datepicker #picker6></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 4</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker7" formControlName="fecha7">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker7"></mat-datepicker-toggle>
                        <mat-datepicker #picker7></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker8" formControlName="fecha8">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker8"></mat-datepicker-toggle>
                        <mat-datepicker #picker8></mat-datepicker>
                    </mat-form-field>
                </div>
            </ng-container>
            <ng-container *ngIf="tipo=='formulacion' && vigenciaSelected">
                <div class="container-border-for">
                    <h4>Período de Formulación</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker9" formControlName="fecha9">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker9"></mat-datepicker-toggle>
                        <mat-datepicker #picker9></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker10" formControlName="fecha10">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker10"></mat-datepicker-toggle>
                        <mat-datepicker #picker10></mat-datepicker>
                    </mat-form-field>
                </div>
                
            </ng-container>
        </form>
    </mat-card-content>
    <mat-card-footer *ngIf="!reporteHabilitado && tipoSelected" style="text-align: center;">
        <button mat-raised-button color="primary" [disabled]="guardarDisabled" (click)="guardar()">
            Guardar
        </button>
        <button mat-raised-button color="primary" (click)="limpiar()">
            Limpiar
        </button>
    </mat-card-footer>
</mat-card>
<br><br>
<mat-card class="card-oas">    
    <mat-card-content>
        <form [formGroup]="formFechas">
            <div class="container-border">
                <h2 class="titulo">Planes de Acción de Inversión</h2>
                <mat-form-field appearance="fill" [style.width.%]="100">
                    <mat-label id="tipo-input-label">Seleccione la Vigencia</mat-label>
                    <mat-select (selectionChange)="onChangeI($event.value)">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
                            {{vigencia.Nombre}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="fill" [style.width.%]="100">
                    <mat-label id="tipo-input-label">Formulación / Seguimiento</mat-label>
                    <mat-select (selectionChange)="onChange($event.value)">                    
                        <mat-option value="formulaciones">Formulación</mat-option>
                        <mat-option value="seguimientos">Seguimiento</mat-option>
                    </mat-select>
                </mat-form-field>                
                <mat-form-field appearance="fill" [style.width.%]="100">
                    <mat-label id="tipo-input-label">Unidades a las que desea asignar el proceso</mat-label>
                    <mat-select (selectionChange)="onChangeU($event.value)">
                        <mat-option>--</mat-option>
                        <mat-option value="unidades">Unidades a las que desea asignar el proceso</mat-option>
                        
                    </mat-select>
                </mat-form-field>
                <!-- <button class="mat-card">Unidades a las que desea asignar el proceso</button> -->
            </div>            
            <ng-container *ngIf="tipo=='seguimientos' && vigenciaSelected">
                <div class="container-border">
                    <h4>Período 1</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="fecha1">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker2" formControlName="fecha2">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 2</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker3" formControlName="fecha3">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                        <mat-datepicker #picker3></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker4" formControlName="fecha4">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                        <mat-datepicker #picker4></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 3</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker5" formControlName="fecha5">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                        <mat-datepicker #picker5></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker6" formControlName="fecha6">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker6"></mat-datepicker-toggle>
                        <mat-datepicker #picker6></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="container-border">
                    <h4>Período 4</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker7" formControlName="fecha7">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker7"></mat-datepicker-toggle>
                        <mat-datepicker #picker7></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker8" formControlName="fecha8">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker8"></mat-datepicker-toggle>
                        <mat-datepicker #picker8></mat-datepicker>
                    </mat-form-field>
                </div>
            </ng-container>
            <ng-container *ngIf="tipo=='formulaciones' && vigenciaSelected">
                <div class="container-border-for">
                    <h4>Período de Formulación</h4>
                    <mat-label class="label-fecha">Desde: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker9" formControlName="fecha9">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker9"></mat-datepicker-toggle>
                        <mat-datepicker #picker9></mat-datepicker>
                    </mat-form-field>
                    <mat-label class="label-fecha">Hasta: </mat-label>
                    <mat-form-field appearance="fill" [style.width.%]="30">
                        <mat-label>Seleccione una fecha</mat-label>
                        <input matInput [matDatepicker]="picker10" formControlName="fecha10">
                        <mat-hint>MM/DD/YYYY</mat-hint>
                        <mat-datepicker-toggle matSuffix [for]="picker10"></mat-datepicker-toggle>
                        <mat-datepicker #picker10></mat-datepicker>
                    </mat-form-field>
                </div>
                
            </ng-container>
        </form>
    </mat-card-content>
    
    <mat-card class="card-oas" *ngIf="(tipo=='formulaciones' || tipo=='seguimientos') && vigenciaSelected && unidadSelected">
        <mat-card-header class="container-border">Unidades a las que desea asignar el proceso</mat-card-header>
        <br>
        <br>
        <mat-card-content>          
            
              <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                              
                <!-- Position Column -->
                <ng-container matColumnDef="position">
                  <th mat-header-cell *matHeaderCellDef class="num">No.</th>
                  <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>
              
                <!-- Unidad Column -->
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Unidad </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>             
                
                <!-- Seleccionar -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef > 
                        <span class="header-align-right"> Seleccionar </span>   
                    </th>
                    <td mat-cell *matCellDef="let row" class="mat-column-actions">                        
                        <button mat-icon-button (click)="changeIcon(row)"><mat-icon >{{row.icon}}</mat-icon></button>
                    </td>
                </ng-container>
              
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              
              
               
        </mat-card-content>
    </mat-card>
    <mat-card-footer *ngIf="!reporteHabilitado && tipoSelected" style="text-align: center;">
        <button mat-raised-button color="primary" [disabled]="guardarDisabled" (click)="guardar()">
            Guardar
        </button>
        <button mat-raised-button color="primary" (click)="limpiar()">
            Limpiar
        </button>
    </mat-card-footer>
</mat-card>
<mat-card class="notice" *ngIf="reporteHabilitado && tipoSelected">
    <p>Señor usuario, los reportes para el {{periodo.ParametroId.Nombre}} de la vigencia {{vigencia.Nombre}} ya
        se encuentran habilitados.</p>
</mat-card>