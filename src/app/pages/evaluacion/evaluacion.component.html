<mat-card class="card-oas">
  <mat-card-header>
    <mat-card-title>Evaluación planes de acción anuales</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-form-field class="selectorPlanStyle" appearance="fill">
      <mat-label id="tipo-input-label">Seleccionar Unidad</mat-label>
        <mat-select id="test" (selectionChange)="onChangeU($event.value)">
          <mat-option>--</mat-option>
          <mat-option *ngFor="let unidad of unidades" [value]="unidad">
            {{unidad.Nombre}}
          </mat-option>
        </mat-select>
    </mat-form-field>
    <mat-form-field class="selectorVigenciaStyle" appearance="fill">
      <mat-label id="tipo-input-label">Vigencia</mat-label>
        <mat-select (selectionChange)="onChangeV($event.value)">
          <mat-option>--</mat-option>
          <mat-option *ngFor="let vigencia of vigencias" [value]="vigencia">
            {{vigencia.Nombre}}
          </mat-option>
        </mat-select>
    </mat-form-field>
  </mat-card-content>
  <div class="align-button-ingresar">
      <button *ngIf="unidadSelected != false && vigenciaSelected != false" (click)="ingresarEvaluacion()" class="btn-gestion-seg" mat-raised-button color="primary">Ingresar Evaluación</button>
  </div>

  <div *ngIf="bandera === true">
    <mat-card-header>
      <mat-card-title>Evaluación planes de acción anuales</mat-card-title>
    </mat-card-header>
    <table mat-table [dataSource]="testDatos" matSort>
      <ng-container matColumnDef="id" >
          <th mat-header-cell *matHeaderCellDef mat-sort-header> N° </th>
          <td mat-cell *matCellDef="let row">{{row.numero}}</td>
      </ng-container>
      <ng-container matColumnDef="unidad">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Ponderación actividad </th>
          <td mat-cell *matCellDef="let row"> {{row.ponderacion}} </td>
      </ng-container>
      <ng-container matColumnDef="estado">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Trimestre 1 </th>
          <td mat-cell *matCellDef="let row"> {{row.trimestre1}}% </td>
      </ng-container>
      <ng-container matColumnDef="vigencia">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Trimestre 2 </th>
          <td mat-cell *matCellDef="let row">
            {{row.trimestre2}}%
      </td>
      </ng-container>
      <ng-container matColumnDef="periodo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Trimestre 3 </th>
          <td mat-cell *matCellDef="let row">
            {{row.trimestre3}}%
          </td>
      </ng-container>
      <ng-container matColumnDef="seguimiento">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Trimestre 4 </th>
          <td mat-cell *matCellDef="let row">
            {{row.trimestre4}}%
      </td>
      </ng-container>
      <div>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </div>
      <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4"></td>
      </tr>
    </table>
    <br>
    <table mat-table [dataSource]="testDatos" matSort>
      <ng-container matColumnDef="avance" >
          <th class="ng-container" mat-header-cell *matHeaderCellDef mat-sort-header> % Avance general </th>
      </ng-container>
      <ng-container matColumnDef="sumaT1">
          <th id="sum1" class="background-sum" mat-header-cell *matHeaderCellDef > {{sumaT1}}% </th>
      </ng-container>
      <ng-container matColumnDef="sumaT2">
          <th class="background-sum" mat-header-cell *matHeaderCellDef> {{sumaT2}}% </th>
      </ng-container>
      <ng-container matColumnDef="sumaT3">
          <th class="background-sum" mat-header-cell *matHeaderCellDef> {{sumaT3}}% </th>
      </ng-container>
      <ng-container matColumnDef="sumaT4">
          <th class="background-sum" mat-header-cell *matHeaderCellDef> {{sumaT4}}% </th>
      </ng-container>
      <div>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsSum"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsSum;"></tr>
      </div>
      <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4"></td>
      </tr>
    </table>
    <div class="align-button-ingresar">
        <button class="btn-gestion-seg" mat-raised-button color="primary" (click)="backClicked()">Regresar</button>
    </div>
  </div>
  </mat-card>
